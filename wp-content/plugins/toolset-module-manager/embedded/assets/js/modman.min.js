!function(e,t,o){function i(e,t,o){return e="object"!=typeof userSettings?{}:a.getHash(e+"-"+userSettings.uid)||{},e.hasOwnProperty(t)?e[t]:"undefined"!=typeof o?o:""}function n(e,t,o,i){if("object"!=typeof userSettings)return!1;var n=e+"-time-"+userSettings.uid,e=e+"-"+userSettings.uid,l=a.getHash(e)||{},d=userSettings.url,s=t.toString().replace(/[^A-Za-z0-9_]/,""),o=o.toString().replace(/[^A-Za-z0-9_]/,"");return i?delete l[s]:l[s]=o,a.setHash(e,l,31536e3,d),a.set(n,userSettings.time,31536e3,d),t}t.fn.slideFadeDown=function(e,o,i){return this.each(function(){t(this).stop(!0).animate({opacity:"show",height:"show"},e,o||"linear",function(){t.browser&&t.browser.msie&&this.style.removeAttribute("filter"),t.isFunction(i)&&i.call(this)})})},t.fn.slideFadeUp=function(e,o,i){return this.each(function(){t(this).is(":hidden")?t(this).hide():t(this).stop(!0).animate({opacity:"hide",height:"hide"},e,o||"linear",function(){t.browser&&t.browser.msie&&this.style.removeAttribute("filter"),t.isFunction(i)&&i.call(this)})})},t.extend({ModManfileDownload:function(o,i){function n(){if(-1!=document.cookie.indexOf(r.cookieName+"="+r.cookieValue))h.onSuccess(o),document.cookie=r.cookieName+"=; expires="+new Date(1e3).toUTCString()+"; path="+r.cookiePath,l(!1);else{if(g||f)try{var e;if((e=g?g.document:a(f))&&null!=e.body&&e.body.innerHTML.length>0){var i=!0;if(v&&v.length>0){var d=t(e.body).contents().first();d.length>0&&d[0]===v[0]&&(i=!1)}if(i)return h.onFail(e.body.innerHTML,o),void l(!0)}}catch(s){return h.onFail("",o),void l(!0)}setTimeout(n,r.checkInterval)}}function a(e){return e=e[0].contentWindow||e[0].contentDocument,e.document&&(e=e.document),e}function l(e){setTimeout(function(){g&&(c&&g.close(),u&&(e?(g.focus(),g.close()):g.focus()))},0)}function d(e){return e.replace(/&/gm,"&amp;").replace(/\n/gm,"&#10;").replace(/\r/gm,"&#13;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;").replace(/'/gm,"&apos;")}var s=function(){alert("A file download error has occurred, please try again.")},r=t.extend({preparingMessageHtml:null,failMessageHtml:null,androidPostUnsupportedMessageHtml:"Unfortunately your Android browser doesn't support this type of file download. Please try again with a different browser.",dialogOptions:{modal:!0},successCallback:function(){},beforeDownloadCallback:!1,failCallback:!1,httpMethod:"GET",data:null,checkInterval:100,cookieName:"__ModManExportDownload",cookieValue:"true",cookiePath:"/",popupWindowTitle:"Initiating file download...",encodeHTMLEntities:!0},i),m=(navigator.userAgent||navigator.vendor||e.opera).toLowerCase(),u=!1,c=!1,p=!1;if(/ip(ad|hone|od)/.test(m)?u=!0:-1!=m.indexOf("android")?c=!0:p=/avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|playbook|silk|iemobile|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(m)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(m.substr(0,4)),m=r.httpMethod.toUpperCase(),c&&"GET"!=m)t().dialog?t("<div>").html(r.androidPostUnsupportedMessageHtml).dialog(r.dialogOptions):alert(r.androidPostUnsupportedMessageHtml);else{r.beforeDownloadCallback&&r.beforeDownloadCallback();var h={onSuccess:function(e){r.successCallback(e)},onFail:function(e,o){r.failMessageHtml?(t("<div>").html(r.failMessageHtml).dialog(r.dialogOptions),r.failCallback&&r.failCallback!=s&&r.failCallback(e,o)):r.failCallback&&r.failCallback(e,o)}};null!==r.data&&"string"!=typeof r.data&&(r.data=t.param(r.data));var f,g,v;if("GET"===m)null!==r.data&&(-1!=o.indexOf("?")?"&"!==o.substring(o.length-1)&&(o+="&"):o+="?",o+=r.data),u||c?(g=e.open(o),g.document.title=r.popupWindowTitle,e.focus()):p?e.location(o):f=t("<iframe>").hide().attr("src",o).appendTo("body");else{var b="";null!==r.data&&t.each(r.data.replace(/\+/g," ").split("&"),function(){var e=this.split("="),t=r.encodeHTMLEntities?d(decodeURIComponent(e[0])):decodeURIComponent(e[0]);if(t){var o=e[1]||"",o=r.encodeHTMLEntities?d(decodeURIComponent(e[1])):decodeURIComponent(e[1]);b+='<input type="hidden" name="'+t+'" value="'+o+'" />'}}),p?(v=t("<form>").appendTo("body"),v.hide().attr("method",r.httpMethod).attr("action",o).html(b)):(u?(g=e.open("about:blank"),g.document.title=r.popupWindowTitle,p=g.document,e.focus()):(f=t("<iframe style='display: none' src='about:blank'></iframe>").appendTo("body"),p=a(f)),p.write("<html><head></head><body><form method='"+r.httpMethod+"' action='"+o+"'>"+b+"</form>"+r.popupWindowTitle+"</body></html>"),v=t(p).find("form")),v.submit()}setTimeout(n,r.checkInterval)}}});var a={each:function(e,t,o){var i,n;if(!e)return 0;if(o=o||e,"undefined"!=typeof e.length){for(i=0,n=e.length;n>i;i++)if(t.call(o,e[i],i,e)===!1)return 0}else for(i in e)if(e.hasOwnProperty(i)&&t.call(o,e[i],i,e)===!1)return 0;return 1},getHash:function(e){var t,e=a.get(e);return e&&a.each(e.split("&"),function(e){e=e.split("="),t=t||{},t[e[0]]=e[1]}),t},setHash:function(e,t,o,i,n,l){var d="";a.each(t,function(e,t){d+=(d?"&":"")+t+"="+e}),a.set(e,d,o,i,n,l)},get:function(e){var t,o=document.cookie,i=e+"=";if(o){if(t=o.indexOf("; "+i),-1==t){if(t=o.indexOf(i),0!=t)return null}else t+=2;return e=o.indexOf(";",t),-1==e&&(e=o.length),decodeURIComponent(o.substring(t+i.length,e))}},set:function(e,t,o,i,n,a){var l=new Date;"object"==typeof o&&o.toGMTString?o=o.toGMTString():parseInt(o,10)?(l.setTime(l.getTime()+1e3*parseInt(o,10)),o=l.toGMTString()):o="",document.cookie=e+"="+encodeURIComponent(t)+(o?"; expires="+o:"")+(i?"; path="+i:"")+(n?"; domain="+n:"")+(a?"; secure":"")},remove:function(e,t){a.set(e,"",-1e3,t)}},l={Popups:{pointer:function(e,o){if(e&&e.length){o||(o={});var i,o=t.extend({"class":!1,message:"",callback:!1,position:{edge:"left",align:"center",offset:"15 0"}},o);return e.pointer({content:o.message,position:o.position,close:function(e,o){return function(){o.callback&&t.isFunction(o.callback)&&o.callback.call(e)}}(e,o),open:function(e,t){t.pointer.hide().fadeIn("fast")}}),i=e.pointer("widget"),o["class"]&&i.addClass(o["class"]),e.pointer("open"),e}}},needsSave:!1,ajaxurl:o.Settings.ajaxurl,sidebars:null,the_id:"",rem:"",win:t(e),init:function(){var e=isRtl?"marginRight":"marginLeft";if(t("#modman-needs-save").hide(),l.sidebars=t("div.modules-sortables"),t("#modules-right").on("click",".sidebar-name",function(){var e=t(this).siblings(".modules-sortables"),o=t(this).parent();o.hasClass("closed")?(o.removeClass("closed"),e.sortable("enable").sortable("refresh")):(e.sortable("disable"),o.addClass("closed"))}),t("#modules-left").children(".modules-holder-wrap").children(".sidebar-name").click(function(){t(this).parent().toggleClass("closed")}),t(".wrap").on("click","a.sidebar-name-arrow",function(){var e=t(this);e.hasClass("modman-open-details")?(e.removeClass("modman-open-details"),e.parents(".module").find(".module-description").slideFadeUp("fast")):(e.addClass("modman-open-details"),e.parents(".module").find(".module-description").slideFadeDown("fast"))}),t("#modules-right").on("click",".modulemanager-description a.sidebar-name-arrow",function(){var e=t(this).closest(".modulemanager-description").find(".module-info-description");e.hasClass("modman-closed")?(e.removeClass("modman-closed"),e.slideFadeDown("fast")):(e.addClass("modman-closed"),e.slideFadeUp("fast"))}),l.sidebars.each(function(){if(t(this).parent().hasClass("inactive"))return!0;var e=50,o=t(this).children(".module").length;e+=parseInt(48*o,10),t(this).css("minHeight",e+"px")}),t("body").on("click"," a.module-action",function(){var o={},i=t(this).closest("div.module"),n=i.children(".module-inside"),a=parseInt(i.find("input.module-width").val(),10);return n.is(":hidden")?(a>250&&n.closest("div.modules-sortables").length&&(o.width=a+30+"px",n.closest("div.modules-liquid-right").length&&(o[e]=235-a+"px"),i.css(o)),l.fixLabels(i),n.slideFadeDown("fast")):n.slideFadeUp("fast",function(){i.css({width:"",margin:""})}),!1}),t("body").on("click","a.module-control-close",function(){return l.close(t(this).closest("div.module")),!1}),t("body").on("click","a.module-remove",function(){return confirm(o.Locale.onModuleRemove)&&t(this).closest(".modules-holder-wrap").fadeOut("fast",function(){t(this).remove(),l.needsSave=!0,t("#modman-needs-save").show(),l.refresh()}),!1}),t("#modules-right").on("change",".module-info-description",function(){l.needsSave=!0,t("#modman-needs-save").show()}),t("body").on("click","a.module-export",function(){return l.exportm(t(this)),!1}),t("body").on("click",".item-not-available .icon-question-sign",function(e){return e.preventDefault(),e=t(this),e[0].__pointer?(e[0].__pointer.pointer("close"),!1):(e[0].__pointer=l.Popups.pointer(e,{message:o.Locale.itemNotAvailableTip,position:{edge:"right",align:"center",offset:"-15 0"},callback:function(){t(this)[0].__pointer=null}}),!1)}),l.sidebars.children(".module").each(function(){l.appendTitle(this),t("p.module-error",this).length&&t("a.module-action",this).click()}),t("#module-list").find(".module").draggable({connectToSortable:"div.modules-sortables",handle:"> .module-top > .module-title",distance:2,helper:"clone",zIndex:5,containment:"document",start:function(e,t){t.helper.find("div.module-description").hide(),l.the_id=this.id},drag:function(e,t){var o=l.win.scrollTop(),i=l.win.scrollLeft(),n=l.win.height(),a=l.win.width();n+=o;var a=i+a,d=0,s=0,r=!1;t.offset.top>n-100?(s=.1*(n-t.offset.top),r=!0):t.offset.top<o+100&&(s=.1*(o-t.offset.top),r=!0),t.offset.left>a-100?(d=.1*(a-t.offset.left),r=!0):t.offset.left<i+100&&(d=.1*(i-t.offset.left),r=!0),r&&l.win[0].scrollBy(d,s)},stop:function(){l.rem&&t(l.rem).hide(),jQuery(".module.ui-draggable").css("height",""),l.rem=""}}),l.sidebars.sortable({placeholder:"module-placeholder",items:"> .module",handle:"> .module-top > .module-title",cursor:"move",distance:2,containment:"document",start:function(e,t){t.item.children(".module-inside").hide(),t.item.css({margin:"",width:""})},stop:function(e,o){if(o.item.hasClass("ui-draggable")&&o.item.data("draggable")&&o.item.draggable("destroy"),o.item.hasClass("deleting"))o.item.remove(),l.resize(),l.needsSave=!0,t("#modman-needs-save").show();else{var i=t(this).closest(".modules-holder-wrap");i[0].__pointer&&i[0].__pointer.pointer("close");var n=t(o.item);if(t(this).find(".module").not(n).filter(function(){return t(this).find(".module-data .module-item").text()==n.find(".module-data .module-item").text()}).length)o.item.remove();else{var i=parseInt(t("input#__module_cnt__").val(),10)+1,a=l.the_id;t(this).attr("id"),t("input#__module_cnt__").val(i+""),o.item.css({margin:"",width:""}),l.the_id="",l.needsSave=!0,t("#modman-needs-save").show(),o.item.attr("id",a.replace("__cnt__",i)),o.item.find("a.module-action").click()}}},receive:function(e,o){var i=t(o.sender);(!t(this).is(":visible")||-1!=this.id.indexOf("orphaned_modules"))&&i.sortable("cancel"),-1!=i.attr("id").indexOf("orphaned_modules")&&!i.children(".module").length&&i.parents(".orphan-sidebar").slideUp(400,function(){t(this).remove()})}}).sortable("option","connectWith","div.modules-sortables").parent().filter(".closed").children(".modules-sortables").sortable("disable"),t("#available-modules").droppable({tolerance:"pointer",accept:function(e){return!t(e).parents("#module-list").length},drop:function(e,t){t.draggable.addClass("deleting")},over:function(e,o){o.draggable.addClass("deleting"),t("div.module-placeholder").hide()},out:function(e,o){o.draggable.removeClass("deleting"),t("div.module-placeholder").show()}}),1==i("module-manager","empty_pointer_tip",1)&&0==t("#modules-right .modules-holder-wrap").length){var a=t(".button.modman-add-module"),d=jQuery(".button.modman-add-module");d.length>0&&(a[0].__pointer=l.Popups.pointer(a,{message:o.Locale.addNewModuleTip,position:{edge:"right",align:"center",offset:"-15 0"},callback:function(){t(this)[0].__pointer=null,n("module-manager","empty_pointer_tip",0)}}))}},save:function(){var e={modules:{}};0==t("#modules-right .modules-holder-wrap").length?e.modules=[0]:t("#modules-right .modules-holder-wrap").each(function(){var i=t(this).find(".sidebar-name h3").clone().children().remove().end().text(),i=t.trim(i);e.modules[i]={};var n=t(this).find(".module-info-description").val();n||(n=""),e.modules[i][o.Settings.moduleInfoKey]={},e.modules[i][o.Settings.moduleInfoKey].description=n,0==t(this).find(".modules-sortables .module").length?e.modules[i]=[0]:t(this).find(".modules-sortables .module").each(function(){var o=t(this).find(".module-data .module-plugin").text(),n=t(this).find(".module-data .module-item").text(),a=t(this).find(".module-description").html();a||(a="");var l=t(this).find(".module-title h4").clone().children().remove().end().text(),l=t.trim(l);e.modules[i][o]||(e.modules[i][o]=[]),e.modules[i][o].push({id:n,title:l,details:a})})}),e=t.param(e)+"&modman-save-modules-field="+t("#modman-save-modules-field").val(),t(".ajax-feedback").css("visibility","visible"),t.post(l.ajaxurl,e,function(){t(".ajax-feedback").css("visibility","hidden"),l.needsSave=!1,t("#modman-needs-save").hide()})},appendTitle:function(e){var o=t('input[id*="-title"]',e).val()||"";o&&(o=": "+o.replace(/<[^<>]+>/g,"").replace(/</g,"&lt;").replace(/>/g,"&gt;")),t(e).children(".module-top").children(".module-title").children().children(".in-module-title").html(o)},resize:function(){t("div.modules-sortables").each(function(){if(t(this).parent().hasClass("inactive"))return!0;var e=50,o=t(this).children(".module").length;e+=parseInt(48*o,10),t(this).css("minHeight",e+"px")})},fixLabels:function(e){e.children(".module-inside").find("label").each(function(){var e=t(this).attr("for");e&&e==t("input",this).attr("id")&&t(this).removeAttr("for")})},close:function(e){e.children(".module-inside").slideUp("fast",function(){e.css({width:"",margin:""})})},refresh:function(){l.sidebars=t("div.modules-sortables"),l.sidebars.each(function(){if(t(this).parent().hasClass("inactive"))return!0;var e=50,o=t(this).children(".module").length;e+=parseInt(48*o,10),t(this).css("minHeight",e+"px")}),l.sidebars.sortable("refresh")},addNew:function(){var e=prompt(o.Locale.newModuleName,"New Module"),a=!1,d=0;if(!e)return!1;for(;!a;){var s=jQuery("div.modules-holder-wrap .sidebar-name h3");if(jQuery(s).each(function(t,o){var i=jQuery(o).text(),n=e;i=i.toLowerCase(),n=n.toLowerCase(),i===n&&d++}),0===d)a=!0;else if(e=prompt(o.Locale.duplicatenewModuleName,"New Module"),d=0,!e)return!1}var r=e.replace(/\s+/g,"_"),m=t("#module-template").html(),m=t(m.replace("%%__MOD_NAME__%%",e).replace("%%__MOD_ID__%%",r));m.appendTo(t("#modules-right")),e=t(".button.modman-add-module"),e[0].__pointer&&e[0].__pointer.pointer("close"),m.find(".modules-sortables").sortable({placeholder:"module-placeholder",items:"> .module",handle:"> .module-top > .module-title",cursor:"move",distance:2,containment:"document",start:function(e,t){t.item.children(".module-inside").hide(),t.item.css({margin:"",width:""})},stop:function(e,o){if(o.item.hasClass("ui-draggable")&&o.item.data("draggable")&&o.item.draggable("destroy"),o.item.hasClass("deleting"))o.item.remove();else{var i=t(this).closest(".modules-holder-wrap");i[0].__pointer&&i[0].__pointer.pointer("close");var n=t(o.item);if(t(this).find(".module").not(n).filter(function(){return t(this).find(".module-data .module-item").text()==n.find(".module-data .module-item").text()}).length)o.item.remove();else{var i=o.item.find("input.add_new").val(),a=o.item.find("input.multi_number").val(),d=l.the_id;t(this).attr("id"),o.item.css({margin:"",width:""}),l.the_id="",i&&("multi"==i?(o.item.html(o.item.html().replace(/<[^<>]+>/g,function(e){return e.replace(/__i__|%i%/g,a)})),o.item.attr("id",d.replace("__i__",a)),a++,t("div#"+d).find("input.multi_number").val(a)):"single"==i&&(o.item.attr("id","new-"+d),rem="div#"+d),o.item.find("input.add_new").val(""),o.item.find("a.module-action").click())}}},receive:function(e,o){var i=t(o.sender);(!t(this).is(":visible")||-1!=this.id.indexOf("orphaned_modules"))&&i.sortable("cancel"),-1!=i.attr("id").indexOf("orphaned_modules")&&!i.children(".module").length&&i.parents(".orphan-sidebar").slideUp(400,function(){t(this).remove()})}}).sortable("option","connectWith","div.modules-sortables").parent().filter(".closed").children(".modules-sortables").sortable("disable"),l.needsSave=!0,1==i("module-manager","add_pointer_tip",1)&&(m[0].__pointer=l.Popups.pointer(m,{message:o.Locale.addElementsTip,position:{edge:"right",align:"center",offset:"-15 0"},callback:function(){t(this)[0].__pointer=null,n("module-manager","add_pointer_tip",0)}})),t("#modman-needs-save").show();var u="#"+r;jQuery(u).next(".module-controls").children(".module-remove").after('<a id="'+r+'" class="button-primary module-elements-add-all" href="javascript:;">'+ModuleManagerConfig.Locale.addAllItemsText+"</a>"),jQuery("#modules-right "+u).droppable({drop:function(e,t){jQuery(u).next(".module-controls").children(".module-elements-add-all").remove()}}),l.refresh()},filter:function(e){var o=t("#available-modules .module");""==t.trim(e)?o.show():(o.hide(),o.filter(function(){return t.trim(t(this).find(".module-title h4").text().toLowerCase()).indexOf(e.toLowerCase())>-1?!0:!1}).show())},moduleData:function(e){return data={module:{name:"",module:{}}},$module=t(e),e=$module.find(".sidebar-name h3").clone().children().remove().end().text(),e=t.trim(e),data.module.name=e,data.module.module={},(e=$module.find(".module-info-description").val())||(e=""),data.module.module[o.Settings.moduleInfoKey]={},data.module.module[o.Settings.moduleInfoKey].description=e,0==$module.find(".modules-sortables .module").length?!1:($module.find(".modules-sortables .module").each(function(){var e=t(this).find(".module-data .module-plugin").text(),o=t(this).find(".module-data .module-item").text(),i=t(this).find(".module-description").html(),n=t(this).find(".module-title h4").clone().children().remove().end().text(),n=t.trim(n);i||(i=""),data.module.module[e]||(data.module.module[e]=[]),data.module.module[e].push({id:o,title:n,details:i})}),t.param(data))},exportm:function(e){return e=l.moduleData(e.closest(".modules-holder-wrap")),!1!==e?(t(".ajax-feedback").css("visibility","visible"),t.ModManfileDownload(o.Settings.exportModuleRoute,{data:e,httpMethod:"POST",successCallback:function(){t(".ajax-feedback").css("visibility","hidden")},failCallback:function(){t(".ajax-feedback").css("visibility","hidden"),alert(o.Locale.exportErrorMsg)}})):alert(o.Locale.moduleEmptyMsg),!1}};e.onbeforeunload=function(t){t||(t=e.event),l.needsSave&&(t.cancelBubble=!0,t.returnValue=o.Locale.onPageExit,t.stopPropagation&&(t.stopPropagation(),t.preventDefault()))},t(function(){l.init()}),e.ModuleManager=l}(window,jQuery,ModuleManagerConfig),jQuery(document).ready(function(e){function t(e){e=e.split("+").join(" ");for(var t,o={},i=/[?&]?([^=]+)=([^&]*)/g;t=i.exec(e);)o[decodeURIComponent(t[1])]=decodeURIComponent(t[2]);return o}function o(t){var o=t.tab;"import"==o?(e("#toplevel_page_ModuleManager_Modules li.current").removeClass("current"),e("#toplevel_page_ModuleManager_Modules .modman_nav_import").addClass("current")):"library"==o&&(e("#toplevel_page_ModuleManager_Modules li.current").removeClass("current"),e("#toplevel_page_ModuleManager_Modules .modman_nav_library").addClass("current"))}e("#toplevel_page_ModuleManager_Modules li a").each(function(){var t=e(this).attr("href");t.length>0&&("admin.php?page=ModuleManager_Modules"==t?e(this).parent("li").addClass("modman_nav_main"):"admin.php?page=ModuleManager_Modules&tab=import"==t?e(this).parent("li").addClass("modman_nav_import"):"admin.php?page=ModuleManager_Modules&tab=library"==t&&e(this).parent("li").addClass("modman_nav_library"))});var i=t(document.location.search);o(i),e('form[name="modman-import-form"] #modman-import').attr("disabled","disabled"),e('form[name="modman-import-form"] input:file').change(function(){e('form[name="modman-import-form"] #modman-import').removeAttr("disabled")}),e("#modules-right .modules-sortables").each(function(t,o){var i=this.id;e(".modules-holder-wrap #"+i).is(":empty")&&e("#"+i).next(".module-controls").children(".module-remove").after('<a id="'+i+'" class="button-primary module-elements-add-all" href="javascript:;">'+ModuleManagerConfig.Locale.addAllItemsText+"</a>")}),e("#modules-right .modules-sortables").droppable({drop:function(t,o){var i=t.target.id;e("#"+i).next(".module-controls").children(".module-elements-add-all").remove()}}),e(document).on("click",".module-elements-add-all",function(){var t=this.id;e(".modman-module-section .ui-draggable").each(function(o,i){var n=e(this)[0].outerHTML,a=e(n),a=a.removeAttr("id"),a=a.filter(".ui-draggable").css("display","block"),a=a.find(".module-inside").css("display","none").addBack(".ui-draggable"),l=a[0].outerHTML;e("#modules-right #"+t+".modules-sortables").append(l)}),e("#modules-right #"+t+".modules-sortables").find(".module-top").length&&e(".module-controls #"+t).remove()})});